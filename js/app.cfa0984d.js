(function(){"use strict";var e={8413:function(e,t,n){var i=n(2856),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("LicoBadge",{attrs:{width:"64"}}),e._m(0),e._m(1),e._m(2)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("h3",[e._v("Lib ที่ต้องลง")]),t("p",[t("a",{attrs:{href:"https://www.npmjs.com/package/three"}},[e._v("https://www.npmjs.com/package/three")]),t("br"),t("a",{attrs:{href:"https://www.npmjs.com/package/three-gltf-loader"}},[e._v("https://www.npmjs.com/package/three-gltf-loader")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("h3",[e._v("เรียกใช้ component")]),t("img",{attrs:{src:n(9716)}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("h3",[e._v("ไฟล์ component LicoBadge.vue")]),e._v(" ต้องโหลดไฟล์ 3D เข้ามาใน function loadModel()"),t("br"),t("br"),t("img",{attrs:{src:n(5011)}})])}],o=function(){var e=this,t=e._self._c;return t("div",{ref:"threeContainer",staticClass:"lico-badge three-container",style:`width:${e.width}px;height:${e.width}px;`})},a=[],c=(n(4114),n(8992),n(3949),n(9318)),h=n(8211),l={name:"LicoBadge",data(){return{threejs:null,scene:null,camera:null,mixers:[],neckBone:null,mouse:new c.I9Y,rafId:null}},props:{width:{type:Number,default:64}},methods:{initialize(){this.threejs=new c.JeP({antialias:!0,alpha:!0}),this.threejs.shadowMap.enabled=!0,this.threejs.shadowMap.type=c.Wk7,this.threejs.setPixelRatio(window.devicePixelRatio),this.threejs.setSize(1.8*this.width,1.8*this.width),this.threejs.setClearColor(0,0),this.$refs.threeContainer.appendChild(this.threejs.domElement);const e=50,t=1,n=1,i=1e3;this.camera=new c.ubm(e,t,n,i),this.camera.position.set(0,.5,2.3),this.camera.lookAt(new c.Pq0(0,.6,0)),this.scene=new c.Z58,this.scene.background=null;let s=new c.ZyN(16777215,4);s.position.set(5,10,7.5),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.bias=0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=1,s.shadow.camera.far=500,s.shadow.camera.left=-5,s.shadow.camera.right=5,s.shadow.camera.top=5,s.shadow.camera.bottom=-5,this.scene.add(s),s=new c.$p8(8679010,5),this.scene.add(s),this.loadModel(),window.addEventListener("mousemove",this.onMouseMove),this.raf()},loadModel(){const e=new h.B;e.load("./lico-idle.glb",(e=>{e.scene.traverse((e=>{e.material&&(e.material.side=c.hB5,e.material.depthWrite=!0),e.receiveShadow=!0,e.castShadow="floor"!==e.name}));const t=[];if(e.animations[0].tracks.forEach(((e,n)=>{e.name.includes("mixamorigHead.quaternion")&&t.push(n)})),t.forEach((t=>{e.animations[0].tracks.splice(t,1)})),this.scene.add(e.scene),this.neckBone=e.scene.getObjectByName("mixamorigHead"),e.animations.length>0){const t=new c.Iw4(e.scene),n=t.clipAction(e.animations[0]);n.play(),this.mixers=[t]}}))},onMouseMove(e){const t=this.threejs.domElement.getBoundingClientRect(),n=t.left+1.8*this.width/2,i=t.top+1.8*this.width/2;this.mouse.set(e.clientX-n<0?(e.clientX-n)/n:(e.clientX-n)/(e.currentTarget.innerWidth-n),e.clientY-i<0?(e.clientY-i)/i*-1:(e.clientY-i)/(e.currentTarget.innerHeight-i)*-1),this.neckBone&&this.neckBone.lookAt(this.mouse.x/2,(this.mouse.y+.6)/2,1)},raf(){this.rafId=requestAnimationFrame((e=>{null===this.previousRAF&&(this.previousRAF=e),this.raf();const t=e-this.previousRAF;this.previousRAF=e,this._Step(t),this.threejs.render(this.scene,this.camera)}))},_Step(e){const t=.001*e;this.mixers.length>0&&this.mixers[0].update(t)},cleanup(){cancelAnimationFrame(this.rafId),this.threejs.domElement.removeEventListener("mousemove",this.onMouseMove),this.threejs.dispose(),this.scene=null,this.camera=null,this.mixers=[]}},mounted(){this.initialize()},beforeUnmount(){this.cleanup()}},u=l,d=n(1656),m=(0,d.A)(u,o,a,!1,null,null,null),p=m.exports,f={name:"App",components:{LicoBadge:p}},w=f,v=(0,d.A)(w,s,r,!1,null,null,null),g=v.exports;i.Ay.config.productionTip=!1,new i.Ay({render:e=>e(g)}).$mount("#app")},9716:function(e,t,n){e.exports=n.p+"img/Frame 1261158577.9e1d41f4.png"},5011:function(e,t,n){e.exports=n.p+"img/Frame 1261158578.ede5627e.png"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,r){if(!i){var o=1/0;for(l=0;l<e.length;l++){i=e[l][0],s=e[l][1],r=e[l][2];for(var a=!0,c=0;c<i.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(a=!1,r<o&&(o=r));if(a){e.splice(l--,1);var h=s();void 0!==h&&(t=h)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,s,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/lico-badge/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,r,o=i[0],a=i[1],c=i[2],h=0;if(o.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(c)var l=c(n)}for(t&&t(i);h<o.length;h++)r=o[h],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},i=self["webpackChunklico_badge"]=self["webpackChunklico_badge"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(8413)}));i=n.O(i)})();
//# sourceMappingURL=app.cfa0984d.js.map